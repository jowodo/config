#!/usr/bin/env bash
# wraper script that keeps keepass storage up to date
#
DBNAME=".db.kdbx"
REMOTEDIR="tk:~"
LOCALDIR="$HOME/.password-store"

# copy from remote
mkdir -p ${LOCALDIR}
scp ${REMOTEDIR}/${DBNAME} ${LOCALDIR}
# open 
if [[ $(uname) = 'Darwin' ]] ; then 
    open -a KeePassXC.app -W # ${LOCALDIR}/${DBNAME}
elif [[ $(uname) = 'Linux' || $(uname) = 'OpenBSD' ]] ; then 
    keepassxc ${LOCALDIR}/${DBNAME}
fi
# copy to remote
scp ${LOCALDIR}/${DBNAME} ${REMOTEDIR}

