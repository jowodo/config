#!/bin/bash 
# wraper script that keeps keepass storage up to date
#
DBNAME=".db.kdbx"
REMOTEDIR="tk:~"
LOCALDIR="$HOME/.password-store"
if [[ $(uname) = 'Darwin' ]] ; then 
    KEEPASSBIN='open -W'
elif [[ $(uname) = 'Linux' ]] ; then 
    KEEPASSBIN='keepassxc'
fi

mkdir -p ${LOCALDIR}
scp -v ${REMOTEDIR}/${DBNAME} ${LOCALDIR}
$KEEPASSBIN ${LOCALDIR}/${DBNAME}
scp -v ${LOCALDIR}/${DBNAME} ${REMOTEDIR}

